\chapter{Requerimientos específicos}
En esta sección se procede a la realización de una especificación completa de la solución. Para ello presentaremos una visión general de la solución, para posteriormente presentar un analisis mas detallado de los distintos aspectos de la misma. Consideramos que de esta manera es posible trabajar con un nivel de detalle mayor en cuestiones particulares, sin generar que la visión de la solución como un todo sea engorrosa.

%{\color{Blue} Esta sección debería contener todos los requerimientos en un nivel de detalle suficiente para permitir:
%
%*	a los diseñadores de software: realizar un diseño que satisfaga los requerimientos
%
%*	a los analistas de pruebas: verificar que el software satisface los requerimientos
%
%A través de esta sección, cada requerimiento declarado debería ser perceptible por usuarios, operadores y otros sistemas externos. Estos requerimientos deberían incluir, al menos,  una descripción de cada entrada (estímulo) del software , de cada salida (respuesta) del software, y de todas las funciones que debe realizar el software en respuesta de una entrada o como soporte a una salida.
%Esta sección es la más importante del presente documento.}
%
%{\color{ForestGreen}CdC: En esta sección se espera que se describan los requerimientos específicos utilizando las distintas técnicas vistas en la materia. Se espera encontrar:
%
%$\wp$	Diagrama de contexto
%
%$\wp$	Se espera al menos que estén modelados los fenómenos esenciales identificados.
%
%$\wp$	Modelo de Objetivos
%
%$\hbar$	Se espera al menos que estén bien refinados los objetivos principales  y los requerimientos esenciales (ver sección Matriz de requerimientos) para la máquina a construir, y obviamente todo el grafo para cubrir el camino entre ellos. La parte explicitada del diagrama debe ser completa y correcta. 
%
%\hspace{3cm} * Todos los objetivos en el camino hacia los requerimientos esenciales deben ser refinados (al menos para explicitar ese camino).
%
%\hspace{3cm} * Puede ser que algún objetivo no se refine porque no sea relevante en el camino a requerimientos esenciales; pero todo objetivo refinado debe incluir a todos los subobjetivos inmediatos.
%
%$\hbar$	Enumeración de todos los requerimientos detectados, con una breve descripción de cada uno, e identificación de si se trata de un requerimiento funcional o no funcional. Además, cada requerimiento deberá clasificarse como esencial, importante o deseable (debe tener coherencia con el Modelo de Objetivos). En esta clasificación se entiende por:
%
%$\diamond$	requerimientos esenciales: aquellos requerimientos que caracterizan la esencia del software a  construir. Sin estos requerimientos, el software ya dejaría de ser lo que se espera.
%
%$\diamond$	requerimientos importantes: aquellos requerimientos que son necesarios para que el software funcione de acuerdo a lo esperado, pero no son esenciales. Su incumplimiento provocaría la no aceptación del software.
%
%$\diamond$	requerimientos deseables: aquellos que representan alguna funcionalidad opcional, su cumplimiento es deseado por el cliente, pero su incumplimiento no provocaría el rechazo del software.
%
%$\wp$	Casos de Uso
%
%$\hbar$	Actores
%
%$\hbar$	Diagramas.
%
%$\hbar$	Descripción de cada caso de uso
%
%$\wp$	Operaciones relevantes
%
%$\hbar$	Describir operaciones relevantes ( si lo necesitan) usando una combinación de técnicas de documentación de casos de uso y/o OCL  y/o lenguaje natural.
%
%$\wp$	Diagramas de Actividad
%
%$\hbar$	Diagramas de actividad que consideren necesarios. En cada caso se debe indicar a que requerimientos y/o casos de uso u otro artefacto hace referencia. 
%
%$\wp$	Máquinas de estado finito
%
%$\hbar$	Máquinas de estado finito que consideren necesarias. En cada caso se debe indicar a que requerimientos y/o casos de uso se hace referencia.
% 
%$\wp$	Modelo Conceptual
%$\hbar$	Diagrama
%$\hbar$	Diccionario de datos
%$\hbar$	Restricciones al MC (utilizando OCL)
%
%$\wp$	Prototipos de Pantalla
%$\hbar$	Prototipos de las pantallas que se consideren importantes para validar. 
%$\hbar$	Se espera que permitan dar una idea de la información input y ouptut que debería mostrarse. No es necesario poner énfasis en el aspecto estético definitivo de la interfaz usuario, sólo que permita comunicar la pantalla desde un punto de vista de la funcionalidad y la interacción posible del usuario.
% 
% 	CdC: La organización de los Requerimientos Específicos es una parte importante de la evaluación. Deben presentarlo de la manera que consideren más apropiada de manera de poder comunicar las ideas.
% 	 
% 	CdC: No es obligatorio utilizar todas las técnicas mencionadas, queda a criterio de cada grupo (y es parte de la evaluación) la elección de la técnica más apropiada para cada aspecto que quieran modelar, así como la decisión de los aspectos modelados.}
\begin{landscape}
\section{Diagrama de contexto}
\begin{figure}[H]
\centering
\includegraphics[height=16cm]{ContextoNormal.png}
\end{figure}
\end{landscape}

\begin{landscape}
\section{Modelo de objetivos}
\subsection{Diagrama de objetivos}
Dado el tamaño del diagrama y para facilitar su lectura decidimos fragmentar el mismo. Las partes se encuentran a continuacion:

\begin{figure}[H]
\centering
\includegraphics[height=14.5cm]{DiagramaObjetivos4.png}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[height=14.5cm]{DiagramaObjetivos3.png}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[height=14cm]{DiagramaObjetivos2.png}
\end{figure}
\begin{figure}[H]
\centering
\includegraphics[height=14.5cm]{DiagramaObjetivos1.png}
\end{figure}
\end{landscape}

\subsection{Descripción de los requerimientos}

\desreq{El sistema registra los pedidos hechos con PDA.}
{Funcional}
{Importante}
{Cuando un mozo toma un pedido desde una mesa, este puede ingresarlo al sistema utilizando una computadora de mano. Estos pedidos quedan registrados en el sistema.}
{contribuye a lograr una atención eficiente de los clientes locales.}

\desreq{Generar un archivo con los datos de la venta.}
{Funcional}
{Importante}
{Cuando se completa un pedido, es decir cuando ya se encuentra cocinado y con las bebidas, el sistema genera un archivo con los datos del mismo, la cantidad de cada producto, su precio, y el precio total para ser facturado por el cajero.}
{Contribuye a brindar la funcionalidad de pagos con efectivo o con tarjeta de credito de clientes.}

\desreq{Es posible indicár que se terminó de preparar un pedido o una parte}
{Funcional}
{Importante}
{Cuando se prepara un pedido, o una parte de él, debe ser posible indicar al sistema que se ha preparado.}
{Permite llevar el estado del pedido, ademas de contribuir a la funcionalidad de poder cambiar el estado del pedido a lo largo de su ciclo de vida.}

\desreq{Es posible indicar que se esta cocinando un pedido o una parte}
{Funcional}
{Importante}
{Cuando un pedido esta preparado, el maestro puede comenzar a cocinar el pedido completo o una parte de el, en cualquiera de los dos casos se debe poder indicar al sistema que ese pedido o parte de pedido se comenzo a cocinar.}
{Ayuda a poder modificar el estado del pedido a lo largo de su ciclo de vida, y ademas de llevar el estado del mismo.}

\desreq{Es posible indicar que se cocinó un pedido o una parte}
{Funcional}
{Importante}
{Cuando el maestro termina de cocinar un pedido o una parte de el, debe poder indicarlo al sistema.}
{Ayuda a poder modificar el estado del pedido a lo largo de su ciclo de vida, y ademas de llevar el estado del mismo.}

\desreq{El encargado puede hacer en modo de contingencia las cosas que hace en modo normal}
{Funcional}
{Importante}
{Cuando el sistema se encuentra en modo de contingencia, el encargado de pedidos va a poder continuar haciendo las funciones que tiene asignadas en modo normal.}
{Este requerimiento aporta al funcionamiento del sistema en modo de contingencia permitiendo que el mismo sea tolerable a fallas.}

\desreq{El encargado puede ingresar cambios en los estados de los pedidos y sus partes}
{Funcional}
{Importante}
{}
{}

\desreq{El encargado puede actualizar precios}
{Funcional}
{Importante}
{}
{}

\desreq{se pueden ingresar cancelaciones}
{Funcional}
{Importante}
{}
{}

\desreq{Al recibir SMS el sistema registra entrega de pedidos}
{Funcional}
{Importante}
{}
{}

\desreq{Poder hacer pedido desde pagina web}{Funcional}{Importante}{El usuario tiene que poder ingresar un pedido desde la interfaz que brinda la página web de la pizzería.}{Para ampliar las formas de venta,	el cliente debe poder hacer pedidos via web, considerados como remotos.}

\desreq{Poder identificar al usuario cuando se loguea}{Funcional}{Importante}{Es necesario poder identificar al usuario que quiere utilizar algun servicio de la pizzeria via web, para ello tendrá asignado un usuario y una contraseña para ingresar a su cuenta}{Cada usuario tendra una cuenta,donde realizará pedidos y podrá revisar el estado de los mismos. Esto se requiere para poder proveer una mejor atención a los clientes.}

\desreq{Mantener base de datos de clientes actualizada}
{Funcional}
{Importante}
{Una base de datos actualizada es necesaria para poder tener información de los usuarios y permitirles realizar pedidos remotos.}
{Mantener una base de datos de clientes actualizada permite identificar de forma correcta a cada uno de ellos, y de esta forma, mejorar la calidad del sistema.}

\desreq{Lograr que el cliente se pueda registrar en la base de datos}
{Funcional}
{Importante}
{los usuarios nuevos que no se encuentren registrados en el sistema, podrán hacerlo, y de esta forma accederán a la posibilidad de realizar pedidos remotos.}
{Esto ayuda a mantener la base de datos de los clientes actualizada, y de esta forma poder dar un mejor servicio.}

\desreq{Identificar al cliente por su número de celular}
{Funcional}
{Importante}
{Asi como para el caso web, para poder hacer un
pedido via SMS es necesario poder identificar el número del celular que 
envía el mensaje, y que éste corresponda con algun cliente que se encuentre registrado en el sistema.}
{Contribuye a brindar el servicio de pedidos via SMS, lo que hace que se mejore la atención a los clientes.}

\desreq{Interactuar con servicio externo de cobros con tarjeta de credito}
{Funcional}
{Importante}
{El sistema debe ser capaz de interactuar con algun servicio similar a paypal, para permitir que un usuario realice el pago de su pedido utilizando una tarjeta de credito.}
{Contribuye a tener una mayor variedad formas de pago, y dejar al cliente que opte por la opción que mas le convenga.}

\desreq{Poder identificar a un pedido de forma unica}
{Funcional}
{Importante}
{Debe ser posible referenciar a un pedido ingresado al sistema de forma univoca}
{Teniendo una unica forma de identificar un pedido, se puede brindar la opcion al cliente de verificar el estado de su pedido de forma remota, lo que mejora la interacción del sistema con el usuario y brinda una mejor atención.}

\desreq{Estimar tiempos de preparacion de pedidos de forma dinamica}
{No funcional} %TODO:dice como tiene q hacerse, verificar
{Deseable}
{En vez de ingresar a mano el tiempo de preparación de pedidos, una alternativa es ir estimando dinamicamente los tiempos
de preparación, de este modo se puede adaptar la estimación según la cantidad de pedidos que tenga que atender la cocina}
{Permitir tener una estimación del tiempo de preparación para los productos individuales y de esta forma contribuir a brindar una aproximación del tiempo total que llevará en realizarse el pedido.}

\desreq{Calcular tiempo total de cocción de un pedido en base a estimaciones individuales}
{Funcional} %TODO: no se si es func o no
{Importante} %todo: no se tampoco
{Los tiempos individuales para los productos deben usarse para poder estimar el tiempo de un pedido teniendo en cuenta la cola
de producción, la politica de asignación, etc.}
{Se desea estimar el tiempo de preparación de los pedidos, para contribuir a una mejor atención de los clientes.}


\desreq{Es posible ingresar datos ocurridos fuera del sistema para su registro y facturación}
{Funcional}
{Deseable}
{Luego de una caida del sistema debería ser posible lograr cargar manualmente los pedidos que ocurrieron durante el tiempo en el que el sistema estuvo caido.}
{Lograr un software mas tolerante a fallos, de esta forma los pedidos que no se pudieron registrar directamente en el sistema se podrán ingresar una vez que éste se encuentre nuevamente operable en condiciones normales.}

\desreq{Al cancelar un pedido se elimina el stock si se cancela despues de preparar o cocinar}
{Funcional}
{Importante}
{Los productos ya preparados o cocinados de un pedido no se pueden reutilizar, por lo que deben ser descartados. Este requerimiento esta relacionado con que este descarte sea automatico, es decir que no se tenga que ingresar las bajas manualmente.}
{Provee un metodo para controlar las cancelaciones de pedidos, y llevar el estado de los mismos. Como el descarte es automatico, ayuda tambien a llevar el estado del stock.}


\desreq{Se restaura el stock si el pedido no estaba preparado, al cancelarlo}
{Funcional}
{Importante}
{Si se cancela antes de preparlo, las materias primas que no se usaron deben volver al stock a fin de que puedan ser usadas para preparar un nuevo pedido, esta funcionalidad es automatica.}
{Permite controlar las cancelaciones, mejorar la eficiencia de la cocina, y contribuye a llevar el estado del stock.}

\desreq{Se alerta al responsable en caso de que el stock de un producto sea critico}
{Funcional}
{Esencial}
{Cuando el stock de un producto queda por debajo de un limite preestablecido se debe generar algun mensaje dirigido al responsable de stock a fin de notificar esta situación.}
{Es una funcionalidad pedida explicitamente, y ayuda a mantener un stock apropiado de los distintos productos, y evitar asi la falta de insumos para realizar pedidos.}

\desreq{Disponer de ABM de stock}
{Funcional}
{Importante}
{El sistema debe permitir que las altas, bajas y modificaciones de productos se registren en el sistema, para de esta manera controlar el stock de las materias primas y bebidas.}
{Mantener el stock de insumos actualizados, lo que contribuye a tener un control de stock apropiado.}


\desreq{Al ingresar pedido se actualiza el stock}
{Funcional}
{Importante}
{El sistema decrementará el stock de materias primas o bebidas necesarias para un pedido al momento en que este ingresa al sistema.}
{Permite que el ingreso de pedidos modifique el stock consistentemente y de esta manera tener un stock actualizado.}

\desreq{Todos los pedidos pueden registrarse en el sistema}
{Funcional}
{Esencial}
{Los pedidos realizados pueden ingresarse al sistema y registrarse.}
{Este requerimiento ayuda controlar el stock de insumos y conocer el estado de los pedidos.}

\desreq{Operaciones de ingreso de pedido y baja de stock son atomicas}
{No funcional} %TODO: no se
{Importante}
{Al momento de ingresar un pedido deberia ser posible hacer un lockeo de los productos necesarios, de modo que al momento de confirmar el mismo los recursos a utilizar esten efectivamente disponibles.}
{Evitar tomar pedidos si no se dispone de los recursos para satisfacerlos.}

\desreq{Rechazar ingreso de pedido si la cantidad de ingredientes son insuficientes}
{Funcional}
{Esencial}
{Si cuando se realiza un pedido no se dispone de los recursos necesarios para completarlo, el mismo no debe ingresar al sistema y se debe notificar a quien este intentando realizar el pedido de la situación}
{Evitar tomar pedidos si no se dispone de los recursos para satisfacerlos.}

\desreq{Disponer de ABM de productos}
{Funcional}
{Importante}
{Se debe proveer de una interfaz para registrar nuevos productos (por ejemplo nuevas variedades de pizza) al menú asi como también modificar precios de productos ya registrados o sacarlos del menú. Por otro lado, este ABM sirve para registrar la cantidad de materias primas que utiliza un producto}
{Conocer la cantidad de materia prima que usa un producto a fin de poder evitar tomar pedidos insatisfacibles. Y permitir modificar la lista de precios.}

\desreq{Mantener estadisticas sobre productos gestionados}
{Funcional}
{Escencial} %TODO: mmmmmmm
{El sistema debe ser capaz de retener la información estadistica sobre los pedidos asi como también calcular los diferentes indicadores estadisticos \textcolor{Peach}{Describir esto en algun lado}}%FIXME: completar esto
{Se pide de forma explicita tener información estadistica sobre el funcionamiento de la pizzeria, los pedidos, las cancelaciones, y productos mas vendidos para hacer promociones.}

\desreq{Lograr que el usuario pueda ingresar comentarios sobre el servicio via web}
{Funional}
{Deseable}
{Como aporte original proponemos que el usuario pueda ingresar comentarios sobre el servicio, luego de recibir un pedido. El sistema debe ser capaz de registrar esos comentarios}
{Este requerimiento ayuda a generar información estadistica, con el objetivo de mejorar el servicio.}


\section{Casos de uso}
\subsection{Diagrama}
\begin{figure}[H]
\centering
\includegraphics[height=15.5cm]{casosdeuso.png}
\end{figure}
\subsection{Descripción de los casos de uso}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% plantilla para casos de uso %%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\op{agrego una operacion en contexto normal}{y ahora su contexto de excepcion}
%\op{agrego otra}{lo malo es q no se numeran solas}
%\cu{nombre del caso de uso}{actor relacionado}{requerimiento}{pre}{pos}
%\oplist={} vacio la lista para otro caso de uso
%\cu{hola}{colo}{trolo}{fonolo}{rqqq}
%

%TODO: revisar los numeros de requerimiento que quedaron cambiados
%LOGUEANDO USUARIO
\op{1. El cliente ingresa su nombre de cliente en el campo correspondiente}{}
\op{2. El cliente ingresa su contraseña en el campo correspondiente}{}
\op{3. El cliente presiona el boton de ingresar}{}
\op{4. El sistema valida los datos. Si los datos ingresados son validos, cliente autentificado}{4. Los datos no son validos, se muestra al cliente mensaje informativo y se le permite re ingresar los datos}
\op{5. Fin CU}{}

\cu{Autenticando cliente}{Usuario}{1,2}{TRUE}{Usuario logueado}{Autentificación de un cliente web}

% Haciendo pedido via web
\op{1. Se incluye el caso de uso logueando usuario}{}
\op{2. Usuario selecciona de una lista los productos que desea y su cantidad}{}
\op{3. El cliente presiona el boton de enviar pedido}{}
\op{4. El sistema intenta ingresar el pedido}{}
\op{5. Se pregunta al cliente si desea pagar con tarjeta de credito o pagar en efectivo al delivery}{}
\op{6. Si el pedido es posible, se informa al cliente}{6. Si el pedido no
era posible de tomar, se muestra mensaje de error al cliente indicando que productos no estan disponibles}
\op{7. Si el cliente desea pagar con tarjeta se extiende con el caso de uso Pagando pedido via web}{}
\op{8. Si se paga con tarjeta y el pago fue posible, el pedido queda registrado}{}
\op{9. Se brinda al cliente un id de pedido para poder luego consultar el estado del pedido}{}
%TODO: averiguar si la notacion de extender es la que se usa aca
\op{10. Fin CU}{}

\cu{Realizando pedido via web}{Usuario}{1}{Usuario logueado}{Pedido registrado}{Ingreso de un pedido al sistema desde la pagina web}

%Cancelando pedido
\op{1. El cliente informa al encargado de pedido su nombre o nombre de cliente y el id de pedido, o el cliente informa al mozo que desea cancelar un pedido y el mozo informa al encargado de pedidos el deseo de la mesa de cancelar el pedido}{}
\op{2. El encargado ingresa el nombre proporcionado por el cliente y el id de pedido o revisa los pedidos de la mesa}{}
\op{3. Una vez seleccionado el pedido por el encargado, presiona el boton de cancelar pedido y el pedido queda cancelado}{3.1. Si los datos no corresponden con ningun pedido, el sistema muestra un cartel de error, y el encargado debe informar de la situación al cliete para que verifique los datos}
\op{}{3.2.}%TODO: el pedido puede no poder cancelarse porq el tema de la factura
\op{4. Fin CU}{}

\cu{Cancelando pedido}{Encargado de pedido}{$\infty$}{TRUE}{Pedido cancelado}{Cancelación de un pedido} 
%FIXME: deberia haber precondicion?

%Realizando pedido via SMS
\op{1. El cliente escribe codigos que identifican a productos (por ejemplo: Muzza podria ser un codigo para pedir una pizza de muzzarela) asi como la cantidad (por ejemplo: Muzza 2 Napo 1, podria ser dos muzzarelas y una napolitana)}{}
\op{2. El cliente envia el mensaje a la pizzería}{}
\op{3. El sistema revisa si el número desde donde proviene el mensaje esta registrado con algún cliente, si no es asi el pedido no se ingresa, fin CU}{3. Si el número esta registrado pero el mensaje no corresponde con ningún código se notifica al cliente que el código no es válido}
\op{4. El sistema revisa si es posible tomar el pedido, si es posible se ingresa el pedido, se envia al usuario un mensaje 
notificandole que su pedido esta ingresado, el importe total, el tiempo de demora aproximado y el codigo de pedido para realizar consultas sobre el mismo}{3. Si no era posible se envia un mensaje indicandole que producto no estaba disponible}
\op{5. Fin CU}{}
\cu{Realizando pedido via sms}{Cliente}{$\infty$}{TRUE}{Pedido ingresado}{Ingreso de un pedido a traves de mensaje de texto}

%Ingresando feedback
\op{1. El cliente ingresa a la página web de feedback}{}
\op{2. Se incluye CU logueando usuario}{}
\op{3. Ingresa al apartado de feedback}{}
\op{4. Ingresa el número de pedido sobre el que va a emitir feedback}{}
\op{5. El sistema verifica que el número de pedido corresponda con un pedido enviado por delivery}{}
\op{6. Si el número era valido, se muestra un formulario al usuario para que envia sus opinión}{5. Si el número no coincide se envia un mensaje de error al usuario}
\op{7. Fin CU}{}
\cu{Ingresando feedback}{Cliente}{28}{TRUE}{Comentario ingresado}{Permite que el usuario envie al sistema su opinión sobre un pedido recibido por delivery}

%Consultando estado de pedido
\op{1. Si el agente que desea consultar estado es el encargado de pedidos ir a 6}{}
\op{2. El cliente selecciona consultar estado de pedido}{}
\op{3. El cliente ingresa el número del pedido cuyo estado quiere conocer}{}
\op{4. El sistema verifica que el número de pedido corresponda a un pedido del usuario}{}
\op{5. Si es asi se muestra el estado del pedido, ir a fin CU}{5. Si no es asi se muestra un mensaje de error, pedir que ingrese de nuevo el número de pedido}
\op{6.El encargado de pedidos ingresa el numero de pedido a consultar}{}
\op{7. Se verifica que el número de pedido sea correcto, si es asi se muestra el estado y demas información del pedido}{7. Si no es asi se notifica con un mensaje de error}
\op{5. Fin CU}{}
\cu{Consultando estado de pedido}{Cliente, encargado de pedidos}{$\infty$}{Si el agente es un cliente entonces tiene que estar logueado}{Se muestra el estado del pedido}{Permite ver en que estado se encuentra un pedido en un momento dado}

%ingresando pedidos diferidos
\op{1. El encargado de pedidos selecciona ingresar pedido diferido}{}
\op{2. El sistema muestra la pantalla para el ingreso del pedido}{}
\op{3. El encargado ingresa los datos que conoce sobre el pedido (por ejemplo: cantidad de empanadas, pizzas, estado actual del pedido)}{}
\op{4. El encargado presiona ingresar pedido}{}
\op{5. El pedido queda ingresado}{}
\op{6. Fin CU}{}
%FIXME: ojo con este cu porque nos puede traer dolor de pelotas en el diagrama de conceptos, notar que algunos atributos que posiblemente tenga la clase pedido, este tipo de pedidos no los va a tener.

\cu{Ingresando pedido diferido}{Encargado de pedidos}{15}{}{El pedido diferido queda registrado}{Permite ingresar un pedido que no pudo ser ingresado al sistema cuando se originó, por ejemplo porque el sistema estaba caido}

%estableciendo politica de cola
\op{1. El encargado de pedidos selecciona establecer politica de cola}{}
\op{2. Luego escoge uno de los hornos}{}
\op{3. El sistema lista las politicas disponibles}{}
\op{4. El encargado selecciona la que desea aplicar}{}
\op{5. Luego ingresa aceptar}{}
\op{6. La politica de coloa queda establecida}{}
\op{7. Fin CU}{} %FIXME: en que momento se aplica la modificación? el cambio de politica puede dejar chingadas algunas cosas

\cu{Estableciendo politica de cola}{Encargado de pedidos}{10,11}{}{Politica de cola establecida}{Permite modificar la politica de cola de pedidos de los hornos}


%registrando pedido telefonico
\op{1. El encargado le pide al cliente sus datos de identificaci'on}{}
\op{2. Ingresa el n'umero del cliente que realiza la llamada}{}
\op{3. El sistema verifica si el cliente est'a registrado}{}
\op{4. Si el cliente estaba registrado, el encargado selecciona ingresar pedido}{4. Sino, el sistema genera un mensaje de error y luego el encargado sugiere al cliente que se registre. EXTIENDE Registrando cliente. Ir a Fin CU}
\op{5. El encargado le pide al cliente que le dicte el pedido}{}
\op{6. Selecciona los productos con las cantidades que el cliente solicita}{}
\op{7. Presiona aceptar}{}
\op{8. El sistema verifica, con el stock, si el posible satisfacer el pedido}{}
\op{9. Si el pedido se puede satisfacer, el sistema lo registra como ingresado. Si el pedido no se puede satisfacer, el sistema mostara un mensaje de error informando que productos no est'an disponibles. El encargado notifica al cliente de la situaci'on y se vuelve a paso 6}{}
\op{10. El sistema genera el identificador de pedido, estima la demora del mismo, calcula costo total y finalmente notifica al encargado de pedidos sobre estos datos}{}
\op{11. El encargado da esa informaci'on al cliente}{}
\op{12. Fin CU}{}
%TODO: Si el pedido es mixto se brinda la posibilidad de que el encargado de pedidos asigne un horno o de que esta asignaci'on sea autom'atica.

\cu{Registrando pedido telef'onico}{Encargado de pedidos}{23}{Hay llamada telef'onica}{Pedido ingresado al sistema}{Permite que el encargado de pedidos ingrese los pedidos realizados por clientes v'ia telefono}

%ingresando pedido de mesa
\op{1. El cliente informa al mozo lo que quiere pedir}{}
\op{2. El mozo marca en su PDA los productos que el cliente pide con sus cantidades}{}
\op{3. Cuando el cliente informó todo el pedido, el mozo selecciona ingresar pedido}{}
\op{4. Si el pedido se puede tomar, al mozo se le informa el número de pedido y le informa la demora aproximada.}{4. Si no se puede tomar el pedido, se informa al mozo que partes del pedido no estan disponibles, el mozo informa al cliente y se vuelve a 1}
\op{5. Fin CU}{}

\cu{Registrando pedido de mesa}{Mozo}{23}{}{El pedido de la mesa queda registrado}{Permite que los mozos puedan ingresar los pedidos de las mesas}

%notificando pedido entregado
%\op{1. El delivery entrega el pedido al cliente}{1. Si es imposible entregar el pedido, el delivery env'ia un mensaje para que quede cancelado}
%TODO: que pasa si el pedido no puede ser entregado?
\op{1. El delivery envia un mensaje con el codigo del pedido}{}
\op{2. El sistema recibe el mensaje y el estado del pedido cambia a entregado}{}
\op{3. Fin CU}{}

\cu{Notificando pedido entregado}{Delivery}{$\infty$}{True}{El pedido se registra como entregado}{Permite que el delivery mediante SMS informe inmediatamente la entrega de un pedido}

% Requiriendo facturar
\op{1. El cajero solicita una factura al sistema ingresando que pedido pretende facturar}{}
\op{2. El sistema genera el archivo con los datos necesarios para el sistema de facturación
\begin{itemize}
\item Código del cliente
\item Apellido del Cliente
\item Nombre del Cliente
\item Fecha-hora del despacho
\item Tipo de despacho: en local, mostrador, delivery
\item Monto pagado (si lo hubiera)
\item Nº Cupón de tarjeta de crédito del pago (si lo hubiera)
\item Lista de Productos incluidos, conteniendo cantidad y código del producto
\end{itemize}
y notifica al sistema de facturación}{2. Si el pedido ya fue facturado se muestra un mensaje de error}
\op{3. El sistema de facturacion levanta el archvio y factura}{}
\op{4. El sistema de facturacion avisa al cajero que la factura esta preparada}{}
\op{5. Fin CU}{}

\cu{Requiriendo facturar}{Cajero, Sistema de Facturacion}{14, 6, 29}{Pedido a facturar registrado}{Factura impresa}{La factura se imprimira y quedara a disposicion del cajero}

% Registrando cobro
\op{1. El cajero indica el n'umero de pedido a registrar como cobrado}{}
\op{2. El sistema verifica que el pedido exista y no est'e cobrado}{}
\op{3. Si es asi, el sistema registra el pedido como cobrado}{Sino se produce un mensaje de error}
\op{4. Fin CU}{}

\cu{Registrando cobro}{Cajero}{13, 14, 15}{El pedido est'a facturado}{Se registra el pedido como cobrado}{Cuando se cobra un pedido o el delivery entrega el dinero, el cajero registra el pago del pedido.}

% Actualizando precios
\op{1. El encargado o dueño del local identifica el producto que necesita actualizar el precio}{}
\op{2. El sistema verifica que el producto exista}{}
\op{3. Si es asi, el sistema le indica al encargado o dueño que ingrese el precio del producto}{Sino se produce un mensaje de error y se procede a Fin CU}
\op{4. El encargado o dueño indica el precio del producto}{}
\op{5. El sistema actualiza el precio del producto y avisa al encargado o dueño que la operaci'on fue exitosa}{}
\op{6. Fin CU}{}

\cu{Actualizando precios}{Encargado/Dueño}{14, 26}{TRUE}{Los precios resultan actualizados}{El encargado o dueño modifica precios}

% Consultando informacion estadistica
\op{1. Si el dueño desea observar información estadistica sobre un producto ir a paso 2, sino ir a paso 6}{}
\op{2. El dueño le indica al sistema que requiere datos estad'isticos sobre un producto o pedido}{}
\op{3. El dueño ingresa el n'umero de producto o pedido sobre el cual necesita averiguar estad'isticas}{}
\op{4. El sistema verifica que el producto o pedido exista}{}
\op{5. Si es asi, el sistema imprime en pantalla los datos estad'isticos}{Sino se produce un mensaje de error y se procede a Fin CU}
\op{6. El dueño elige que estadisticas observar entre las disponibles (ver detalle en información estadistica)}{} %TODO: ver que este link lleve a alguna parte :)
\op{7. Cuando el dueño observo las estadisticas que deseaba, ir a fin CU}{}
\op{8. Fin CU}{}

%TODO: 14 es REQ?
\cu{Consultando informaci'on estad'istica}{Encargado/Dueño}{14, 27, 28}{TRUE}{Las estad'isticas son mostradas en pantalla}{El dueño puede consultar la informaci'on estad'istica sobre los productos y pedidos gestionados}

% Notificando stock critico
\op{1. El sistema detecta que la cantidad de un insumo es por debajo del nivel cr'itico}{}
\op{2. El sistema advierte al encargado de stock qu'e insumo es cr'itico hasta que este confirme que el mensaje le ha llegado}{}
\op{3. El encargado de stock confirma al sistema que el mensaje le lleg'o}{}
\op{4. Fin CU}{}

%TODO: 14 es REQ?
\cu{Siendo notificado stock cr'itico}{Encargado de stock}{19}{Alg'un kit o insumo est'a por debajo del nivel cr'itico}{Surge una advertencia de stock cr'itico}{En caso de que el stock de algun producto quede por debajo de un nivel cr'itico, el sistema avisar'a al encargado de stock de esta situaci'on}

% Haciendo ABM de stock
\op{1. El encargado de stock elige que operación realizar}{}
\op{2. El sistema le pide al encargado de stock que ingrese el nombre o n'umero del insumo}{}
\op{3. El encargado de stock ingresa el nombre o el n'umero identificador}{}
\op{4.1. Si se trata de un alta ir a paso 6}{}% el sistema verifica que el insumo no exista en la lista de insumos, sino se procede a paso 10}{}
\op{4.2. Si se trata de una modificación ir a paso 9}{}
\op{4.3. Si se trata de una baja ir a paso 9.}{}
\op{5. El sistema permite ingresar la cantidad y otros datos del insumo}{}
\op{6. El encargado de stock ingresa cantidad en stock del nuevo insumo y datos}{}
\op{7. El sistema agrega el insumo a la lista con su cantidad en stock y datos}{}
\op{8. Ir a Fin CU}{}
\op{9. El sistema verifica que el insumo exista en la lista de insumos}{}
\op{10. Si es asi, se sigue al siguiente paso}{Si el insumo no existe, el sistema produce un mensaje de error y se procede a Fin CU}
\op{11. Si se trata de se una baja de un insumo, el sistema elimina el insumo de la lista, sino se procede a paso 13}{}
\op{12. Ir a Fin CU}{}
\op{13. El sistema le pide al encargado de stock que ingrese la cantidad a aumentar o a quitar}{}
\op{14. El encargado de stock ingresa la cantidad en stock del insumo}{}
\op{15. El sistema modifica la cantidad en stock del insumo}{}
\op{16. Fin CU}{}

%TODO: verificar requerimientos!!!!!!!!!
\cu{Haciendo ABM de stock}{Encargado de stock}{15, 20}{TRUE}{El stock queda actualizado con las modificaciones}{Se puede hacer alta, baja y modificaci'on de insumos y kits comprados o caducados}

\newpage
\section{Descripcion de operaciones} %NOTA: es opcional
\section{Diagrama de actividad}
\section{Maquinas de estado finito}
\section{Modelo conceptual}
\begin{landscape}
\subsection{Diagrama}
\begin{figure}[H]
\centering
\includegraphics[height=14.5cm]{conceptosAlfa}
\end{figure}
\end{landscape}
\subsection{Diccionario de datos} %TODO: no se q es
\subsection{Restricciones al MC en OCL}
\section{Prototipos de pantalla} %WTF :S