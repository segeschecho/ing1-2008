\chapter{Modelado de escenarios}
A continuacion presentaremos diversos escenarios que permiten lograr un modelado del sistema basado en interacciones

\section{Ingreso de un pedido}
%TODO: escenario uno, ingresa un pedido de solo bebidas
Como primer escenario mostraremos lo que ocurre cuando ingresa un pedido al sistema y este esta formado por solo bebidas. En este caso el pedido va ser creado  y luego el contralador de preingreso se encargará de pasarselo al manejador de listos, ya que no hay nada que hacer con este pedido. Asumimosen este escenario que el cliente ya se valido (o es NULL si es un pedido de cliente anonimo) y que hay stock sufiencte para armar el pedido.

En este escenario ademas no modelamos todo el proceso de creación de un pedido, el cual será desarrollado posteriormente

Veamos el diagrama de secuencias relativo al escenario:
%\begin{landscape}
\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{./figuras/ingresaBebida.png}
\end{figure}
%\end{landscape}


La operacion que determina si un pedido es preparable, es decir tiene que ser preparado o no, se puede modelar con el siguiente diagrama de secuencia:

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{./figuras/determinarPreparable.png}
\end{figure}
%FIXME: las lineas de return ultimo hay q hacerlas punteadas con por ej photoshop :p
Consideremos el caso donde el pedido que ingresa si era preparable y por lo tanto debe pasar a la cola de ingreso a la espera de ser preparado. En el siguiente escenario, veremos la secuencia que se desata desde el momento en que el pedido llega al controlador de preIngreso, hasta que es encolado y marcado como ingresado.

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{./figuras/ingresaComidaEncolar.png}
\end{figure}

Como vemos, cuando el pedido pasa al controlador de ingreso, este pregunta si el pedido puede empezar a prepararse ahora mismo o debe encolarlo. El no esta capacitado para decidir eso, ya que no sabe que ocurre con la preparacion de los pedidos. Notemos que tiene que preguntar, porque podría ocurrir que en la cola hallan muchos pedidos, por ejemplo todos de pizza, y por lo tanto el maestro empanadero este ocioso. Al preguntar lo que esta haciendo indirectamente es avisar que llego un pedido nuevo y dejando que el despachador de preparacion decida si esta listo para prepararlo.
%TODO: por que no un observer??

%TODO: ingresa un pedido mixto y queda en la cola de listos, tener en cuenta q la seleccion de horno se hace mientras es intentna ingresar

%TODO: generacion de un pedido
Anteriormente nos encargamos de mostrar como una vez que el pedido ya estaba armado, se comenzaba a recorrer su ciclo de vida. Sin embargo un aspecto previo a desarrollar es como se logra armar este pedido.

Al intentar armar un pedido, el generador de pedidos debe antes que nada utilizar al controlador de stock para verificar que la cantidad de insumos sea suficiente para satisfacer las necesidades del pedido. Esto es responsabilidad del controlador de stock, y para hacerlo se tiene el método verificarEIngresar. Veamos un diagrama de secuencias para el caso en el que se quiere chequear si es viable o no ingresar ciertos productos para armar un pedido.

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{./figuras/verificarEIngresar.png}
\label{verifEIngr}
\end{figure}

Algunos de los metodos no estan desarrollados completamente en \ref{verifEIngr}, sino que las desarrollaremos por separado. Asi tenemos el caso de ingresar que lo que va a hacer es dado un producto, verificar si se tienen los insumos necesarios para hacer el ingreso. Ademas en caso de encontrar que alguno de los stocks queda con un valor menor a su cantidad critica, genera el aviso de stock critico.

\begin{figure}[H]
\centering
\includegraphics[scale=0.4]{./figuras/ingresar(controladorStock).png}
\end{figure}
%TODO: generacion del aviso
%TODO: ver que todos los metodos queden bien explicados, ya sea con pesudocodigo o con DS

\section{Iniciar sesion de cliente}

\section{aviso de stock critico}
A continuación modelaremos escenarios relacionados con la creacion de un pedido, en donde pensamos mostrar como actuan el generador de pedidos, el ve
%TODO: no hay suficiente relleno de una empanada y de una pizza

\section{modificacion de la cola de pedidos}

%TODO: mover un pedido un lugar hacia arriba y otro hacia abajo

\section{Preparacion de pedidos}

%TODO: ingresa un pedido y no hay nada esperando preparandose tonces pasa a preparse

%TODO: se empieza a preparar un pedido mixto de la cola de ingreso

%TODO: maestro pide pedido a preparar y se le da un pedido que el otro maestro esta preparando

\section{Cocción de pedidos}

%TODO: se termina de prepara un pedido y no hay nada esperando

%TODO: se termina de prepara un pedido y se encola en su horno

%TODO: se termina de cocinar algo en un modulo agil y se toma un pedido chico

%TODO: se termina de cocinar algo en un modulo normal y se toma un pedido normal

%TODO: se termina de cocinar algo en un modulo y no hay nada a continuación

%TODO: se saca un producto y se termino de cocinar

\section{Despachar pedido}

%TODO: se despacha un pedido remoto

%TODO: se despacha un pedido local

\section{Se cierra una mesa}

%TODO: se cierra una mesa y se registra la forma de pago

\section{Cancelacion}

%TODO: todos los escenarios de cancelacion

\section{Actualizar precios}
La actualizacion de los precios de pedidos se realiza de la siguiente manera. Al abrirse la pantalla de ABM de productos, se cargan todos los productos en pantalla. Luego se puede elegir un producto de la lista y un nuevo valor para el precio.

Vamos a modelar el escenario donde se cambia el precio de la pizza de muzzarella a \$30.

Notar que probablemente la GUI realice operaciones con la lista de productos que obtiene, por ejemplo cargar una lista en pantalla para mostrar los pedidos, etc. Sin embargo consideramos que los aspectos propios de la GUI no entran en lo que se debe modelar en este trabajo.

\begin{figure}[H]
\centering
\includegraphics[scale=0.7]{./figuras/modifPrecio.png}
\end{figure}


\section{Consulta de estado de pedido}
El escenario a modelar es el siguiente: El encargado de pedidos abre la gui para consultar el estado de un pedido, entonces la gui muestra los pedidos y cuando el encargado encuentra el que busca, pide ver el estado. El coordinador es el encargado de hacer de adaptador entre la GUI y los pedidos.

En el diagrama suponemos que se llama un metodo de la gui verEstado, esto en verdad es abrir la interfaz para ver los estados de pedidos, es decir no es un metodo como tal, pero sirve para dar idea de que alguien le dice a la GUI que busque los pedidos y consulte el estado.

\begin{figure}[H]
\centering
\includegraphics[scale=0.7]{./figuras/verEstado.png}
\end{figure}


